const n=JSON.parse('{"key":"v-fe188afe","path":"/my-blog/tools-code/code.html","title":"å·¥å…·ä»£ç ","lang":"zh-CN","frontmatter":{"title":"å·¥å…·ä»£ç ","category":["è½¯ä»¶å®‰è£…"],"author":"xiaobai","tag":["tools"],"date":"2023-03-29T00:00:00.000Z","isOriginal":"è½¬è½½","description":"å·¥å…·ä»£ç  ğŸ‘‰ æ—¥å¸¸åšå®¢æ–‡ç« ï¼Œç¼–å†™å·¥å…·ä»£ç  æœ‰äº›ä»£ç æ€»æ•°å¿˜è®°æ€ä¹ˆå†™ï¼Œç„¶åç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°±è®°å½•ä¸‹æ¥ã€‚ ğŸ‘‰ ä½œè€…ï¼šå°ç™½ åŸæ–‡ï¼šhttps://blog.csdn.net/zhouqi1427/article/details/126061684 1. mybatisæ’ä»¶ä½¿ç”¨ import com.baomidou.mybatisplus.core.toolkit.PluginUtils; import com.baomidou.mybatisplus.extension.handlers.AbstractSqlParserHandler; import org.apache.ibatis.executor.statement.StatementHandler; import org.apache.ibatis.mapping.BoundSql; import org.apache.ibatis.mapping.MappedStatement; import org.apache.ibatis.mapping.SqlCommandType; import org.apache.ibatis.plugin.Interceptor; import org.apache.ibatis.plugin.Intercepts; import org.apache.ibatis.plugin.Invocation; import org.apache.ibatis.plugin.Signature; import org.apache.ibatis.reflection.MetaObject; import org.apache.ibatis.reflection.SystemMetaObject; import org.springframework.stereotype.Component; import java.sql.Connection; import java.util.Properties; @Intercepts({@Signature( type = StatementHandler.class, method = \\"prepare\\", args = {Connection.class, Integer.class} )}) @Component public class MyBatisPlusInterceptor extends AbstractSqlParserHandler implements Interceptor { @Override public Object intercept(Invocation invocation) throws Throwable { StatementHandler statementHandler = PluginUtils.realTarget(invocation.getTarget()); MetaObject metaObject = SystemMetaObject.forObject(statementHandler); this.sqlParser(metaObject); MappedStatement mappedStatement = (MappedStatement) metaObject.getValue(\\"delegate.mappedStatement\\"); if(!SqlCommandType.SELECT.equals(mappedStatement.getSqlCommandType()) &amp;&amp; !SqlCommandType.DELETE.equals(mappedStatement.getSqlCommandType())) { return invocation.proceed(); } BoundSql boundSql = (BoundSql) metaObject.getValue(\\"delegate.boundSql\\"); // æ‰§è¡Œçš„SQLè¯­å¥ String sql = boundSql.getSql(); // æŸ¥è¯¢æ§åˆ¶ if(SqlCommandType.SELECT.equals(mappedStatement.getSqlCommandType())) { if(!sql.toUpperCase().contains(\\"WHERE\\")) { throw new Exception(\\"ç¼ºå°‘æŸ¥è¯¢æ¡ä»¶\\"); } } // åˆ é™¤æ§åˆ¶ if(SqlCommandType.DELETE.equals(mappedStatement.getSqlCommandType())) { if(!sql.toUpperCase().contains(\\"WHERE\\")) { throw new Exception(\\"ç¼ºå°‘åˆ é™¤æ¡ä»¶\\"); } } // SQLè¯­å¥çš„å‚æ•° Object parameterObject = boundSql.getParameterObject(); // é‡æ–°è®¾ç½®SQL // metaObject.setValue(\\"delegate.boundSql.sql\\", sql); return invocation.proceed(); } /** * ç”Ÿæˆæ‹¦æˆªå¯¹è±¡ä»£ç† * @param target * @return */ @Override public Object plugin(Object target) { return Interceptor.super.plugin(target); } @Override public void setProperties(Properties properties) { Interceptor.super.setProperties(properties); } }","head":[["meta",{"property":"og:url","content":"https://javaguide.cn/my-blog/tools-code/code.html"}],["meta",{"property":"og:site_name","content":"JavaGuide(Javaé¢è¯•+å­¦ä¹ æŒ‡å—)"}],["meta",{"property":"og:title","content":"å·¥å…·ä»£ç "}],["meta",{"property":"og:description","content":"å·¥å…·ä»£ç  ğŸ‘‰ æ—¥å¸¸åšå®¢æ–‡ç« ï¼Œç¼–å†™å·¥å…·ä»£ç  æœ‰äº›ä»£ç æ€»æ•°å¿˜è®°æ€ä¹ˆå†™ï¼Œç„¶åç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°±è®°å½•ä¸‹æ¥ã€‚ ğŸ‘‰ ä½œè€…ï¼šå°ç™½ åŸæ–‡ï¼šhttps://blog.csdn.net/zhouqi1427/article/details/126061684 1. mybatisæ’ä»¶ä½¿ç”¨ import com.baomidou.mybatisplus.core.toolkit.PluginUtils; import com.baomidou.mybatisplus.extension.handlers.AbstractSqlParserHandler; import org.apache.ibatis.executor.statement.StatementHandler; import org.apache.ibatis.mapping.BoundSql; import org.apache.ibatis.mapping.MappedStatement; import org.apache.ibatis.mapping.SqlCommandType; import org.apache.ibatis.plugin.Interceptor; import org.apache.ibatis.plugin.Intercepts; import org.apache.ibatis.plugin.Invocation; import org.apache.ibatis.plugin.Signature; import org.apache.ibatis.reflection.MetaObject; import org.apache.ibatis.reflection.SystemMetaObject; import org.springframework.stereotype.Component; import java.sql.Connection; import java.util.Properties; @Intercepts({@Signature( type = StatementHandler.class, method = \\"prepare\\", args = {Connection.class, Integer.class} )}) @Component public class MyBatisPlusInterceptor extends AbstractSqlParserHandler implements Interceptor { @Override public Object intercept(Invocation invocation) throws Throwable { StatementHandler statementHandler = PluginUtils.realTarget(invocation.getTarget()); MetaObject metaObject = SystemMetaObject.forObject(statementHandler); this.sqlParser(metaObject); MappedStatement mappedStatement = (MappedStatement) metaObject.getValue(\\"delegate.mappedStatement\\"); if(!SqlCommandType.SELECT.equals(mappedStatement.getSqlCommandType()) &amp;&amp; !SqlCommandType.DELETE.equals(mappedStatement.getSqlCommandType())) { return invocation.proceed(); } BoundSql boundSql = (BoundSql) metaObject.getValue(\\"delegate.boundSql\\"); // æ‰§è¡Œçš„SQLè¯­å¥ String sql = boundSql.getSql(); // æŸ¥è¯¢æ§åˆ¶ if(SqlCommandType.SELECT.equals(mappedStatement.getSqlCommandType())) { if(!sql.toUpperCase().contains(\\"WHERE\\")) { throw new Exception(\\"ç¼ºå°‘æŸ¥è¯¢æ¡ä»¶\\"); } } // åˆ é™¤æ§åˆ¶ if(SqlCommandType.DELETE.equals(mappedStatement.getSqlCommandType())) { if(!sql.toUpperCase().contains(\\"WHERE\\")) { throw new Exception(\\"ç¼ºå°‘åˆ é™¤æ¡ä»¶\\"); } } // SQLè¯­å¥çš„å‚æ•° Object parameterObject = boundSql.getParameterObject(); // é‡æ–°è®¾ç½®SQL // metaObject.setValue(\\"delegate.boundSql.sql\\", sql); return invocation.proceed(); } /** * ç”Ÿæˆæ‹¦æˆªå¯¹è±¡ä»£ç† * @param target * @return */ @Override public Object plugin(Object target) { return Interceptor.super.plugin(target); } @Override public void setProperties(Properties properties) { Interceptor.super.setProperties(properties); } }"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"article:author","content":"xiaobai"}],["meta",{"property":"article:tag","content":"tools"}],["meta",{"property":"article:published_time","content":"2023-03-29T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"å·¥å…·ä»£ç \\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-03-29T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"xiaobai\\"}]}"]]},"headers":[{"level":3,"title":"1. mybatisæ’ä»¶ä½¿ç”¨","slug":"_1-mybatisæ’ä»¶ä½¿ç”¨","link":"#_1-mybatisæ’ä»¶ä½¿ç”¨","children":[]},{"level":3,"title":"2.è¯·æ±‚è½¬å‘å‚æ•°ä¼ é€’","slug":"_2-è¯·æ±‚è½¬å‘å‚æ•°ä¼ é€’","link":"#_2-è¯·æ±‚è½¬å‘å‚æ•°ä¼ é€’","children":[]}],"git":{"createdTime":null,"updatedTime":null,"contributors":[]},"readingTime":{"minutes":2.48,"words":744},"filePathRelative":"my-blog/tools-code/code.md","localizedDate":"2023å¹´3æœˆ29æ—¥","excerpt":"<div class=\\"hint-container tip\\">\\n<p class=\\"hint-container-title\\">å·¥å…·ä»£ç </p>\\n<p>ğŸ‘‰ æ—¥å¸¸åšå®¢æ–‡ç« ï¼Œç¼–å†™å·¥å…·ä»£ç \\næœ‰äº›ä»£ç æ€»æ•°å¿˜è®°æ€ä¹ˆå†™ï¼Œç„¶åç”¨çš„æ¯”è¾ƒå¤šï¼Œæ‰€ä»¥å°±è®°å½•ä¸‹æ¥ã€‚</p>\\n<p>ğŸ‘‰ ä½œè€…ï¼šå°ç™½</p>\\n</div>\\n<blockquote>\\n<p>åŸæ–‡ï¼šhttps://blog.csdn.net/zhouqi1427/article/details/126061684</p>\\n</blockquote>\\n<h3> 1. mybatisæ’ä»¶ä½¿ç”¨</h3>\\n<div class=\\"language-java line-numbers-mode\\" data-ext=\\"java\\"><pre class=\\"language-java\\"><code><span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">com<span class=\\"token punctuation\\">.</span>baomidou<span class=\\"token punctuation\\">.</span>mybatisplus<span class=\\"token punctuation\\">.</span>core<span class=\\"token punctuation\\">.</span>toolkit<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">PluginUtils</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">com<span class=\\"token punctuation\\">.</span>baomidou<span class=\\"token punctuation\\">.</span>mybatisplus<span class=\\"token punctuation\\">.</span>extension<span class=\\"token punctuation\\">.</span>handlers<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">AbstractSqlParserHandler</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>executor<span class=\\"token punctuation\\">.</span>statement<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">StatementHandler</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>mapping<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">BoundSql</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>mapping<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">MappedStatement</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>mapping<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">SqlCommandType</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>plugin<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Interceptor</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>plugin<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Intercepts</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>plugin<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Invocation</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>plugin<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Signature</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>reflection<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">MetaObject</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>apache<span class=\\"token punctuation\\">.</span>ibatis<span class=\\"token punctuation\\">.</span>reflection<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">SystemMetaObject</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">org<span class=\\"token punctuation\\">.</span>springframework<span class=\\"token punctuation\\">.</span>stereotype<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Component</span></span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">java<span class=\\"token punctuation\\">.</span>sql<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Connection</span></span><span class=\\"token punctuation\\">;</span>\\n<span class=\\"token keyword\\">import</span> <span class=\\"token import\\"><span class=\\"token namespace\\">java<span class=\\"token punctuation\\">.</span>util<span class=\\"token punctuation\\">.</span></span><span class=\\"token class-name\\">Properties</span></span><span class=\\"token punctuation\\">;</span>\\n\\n<span class=\\"token annotation punctuation\\">@Intercepts</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">{</span><span class=\\"token annotation punctuation\\">@Signature</span><span class=\\"token punctuation\\">(</span>\\n        type <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">StatementHandler</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">class</span><span class=\\"token punctuation\\">,</span>\\n        method <span class=\\"token operator\\">=</span> <span class=\\"token string\\">\\"prepare\\"</span><span class=\\"token punctuation\\">,</span>\\n        args <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">{</span><span class=\\"token class-name\\">Connection</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">class</span><span class=\\"token punctuation\\">,</span> <span class=\\"token class-name\\">Integer</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">class</span><span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">}</span><span class=\\"token punctuation\\">)</span>\\n<span class=\\"token annotation punctuation\\">@Component</span>\\n<span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">class</span> <span class=\\"token class-name\\">MyBatisPlusInterceptor</span> <span class=\\"token keyword\\">extends</span> <span class=\\"token class-name\\">AbstractSqlParserHandler</span> <span class=\\"token keyword\\">implements</span> <span class=\\"token class-name\\">Interceptor</span> <span class=\\"token punctuation\\">{</span>\\n\\n    <span class=\\"token annotation punctuation\\">@Override</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token class-name\\">Object</span> <span class=\\"token function\\">intercept</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">Invocation</span> invocation<span class=\\"token punctuation\\">)</span> <span class=\\"token keyword\\">throws</span> <span class=\\"token class-name\\">Throwable</span> <span class=\\"token punctuation\\">{</span>                        \\n        <span class=\\"token class-name\\">StatementHandler</span> statementHandler <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">PluginUtils</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">realTarget</span><span class=\\"token punctuation\\">(</span>invocation<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getTarget</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token class-name\\">MetaObject</span> metaObject <span class=\\"token operator\\">=</span> <span class=\\"token class-name\\">SystemMetaObject</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">forObject</span><span class=\\"token punctuation\\">(</span>statementHandler<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token keyword\\">this</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">sqlParser</span><span class=\\"token punctuation\\">(</span>metaObject<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token class-name\\">MappedStatement</span> mappedStatement <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">MappedStatement</span><span class=\\"token punctuation\\">)</span> metaObject<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getValue</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"delegate.mappedStatement\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n        <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span><span class=\\"token class-name\\">SqlCommandType</span><span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">SELECT</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">equals</span><span class=\\"token punctuation\\">(</span>mappedStatement<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSqlCommandType</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token operator\\">&amp;&amp;</span> <span class=\\"token operator\\">!</span><span class=\\"token class-name\\">SqlCommandType</span><span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">DELETE</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">equals</span><span class=\\"token punctuation\\">(</span>mappedStatement<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSqlCommandType</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">return</span> invocation<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">proceed</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token punctuation\\">}</span>\\n\\n        <span class=\\"token class-name\\">BoundSql</span> boundSql <span class=\\"token operator\\">=</span> <span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">BoundSql</span><span class=\\"token punctuation\\">)</span> metaObject<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getValue</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"delegate.boundSql\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n        <span class=\\"token comment\\">// æ‰§è¡Œçš„SQLè¯­å¥</span>\\n        <span class=\\"token class-name\\">String</span> sql <span class=\\"token operator\\">=</span> boundSql<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSql</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n        <span class=\\"token comment\\">// æŸ¥è¯¢æ§åˆ¶</span>\\n        <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">SqlCommandType</span><span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">SELECT</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">equals</span><span class=\\"token punctuation\\">(</span>mappedStatement<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSqlCommandType</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>sql<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">toUpperCase</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">contains</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"WHERE\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">throw</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Exception</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"ç¼ºå°‘æŸ¥è¯¢æ¡ä»¶\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n\\n        <span class=\\"token comment\\">// åˆ é™¤æ§åˆ¶</span>\\n        <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">SqlCommandType</span><span class=\\"token punctuation\\">.</span><span class=\\"token constant\\">DELETE</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">equals</span><span class=\\"token punctuation\\">(</span>mappedStatement<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getSqlCommandType</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n            <span class=\\"token keyword\\">if</span><span class=\\"token punctuation\\">(</span><span class=\\"token operator\\">!</span>sql<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">toUpperCase</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">contains</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"WHERE\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n                <span class=\\"token keyword\\">throw</span> <span class=\\"token keyword\\">new</span> <span class=\\"token class-name\\">Exception</span><span class=\\"token punctuation\\">(</span><span class=\\"token string\\">\\"ç¼ºå°‘åˆ é™¤æ¡ä»¶\\"</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n            <span class=\\"token punctuation\\">}</span>\\n        <span class=\\"token punctuation\\">}</span>\\n\\n        <span class=\\"token comment\\">// SQLè¯­å¥çš„å‚æ•°</span>\\n        <span class=\\"token class-name\\">Object</span> parameterObject <span class=\\"token operator\\">=</span> boundSql<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">getParameterObject</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n\\n        <span class=\\"token comment\\">// é‡æ–°è®¾ç½®SQL</span>\\n<span class=\\"token comment\\">//        metaObject.setValue(\\"delegate.boundSql.sql\\", sql);</span>\\n\\n        <span class=\\"token keyword\\">return</span> invocation<span class=\\"token punctuation\\">.</span><span class=\\"token function\\">proceed</span><span class=\\"token punctuation\\">(</span><span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token doc-comment comment\\">/**\\n     * ç”Ÿæˆæ‹¦æˆªå¯¹è±¡ä»£ç†\\n     * <span class=\\"token keyword\\">@param</span> <span class=\\"token parameter\\">target</span>\\n     * <span class=\\"token keyword\\">@return</span>\\n     */</span>\\n    <span class=\\"token annotation punctuation\\">@Override</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token class-name\\">Object</span> <span class=\\"token function\\">plugin</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">Object</span> target<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token keyword\\">return</span> <span class=\\"token class-name\\">Interceptor</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">super</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">plugin</span><span class=\\"token punctuation\\">(</span>target<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n\\n    <span class=\\"token annotation punctuation\\">@Override</span>\\n    <span class=\\"token keyword\\">public</span> <span class=\\"token keyword\\">void</span> <span class=\\"token function\\">setProperties</span><span class=\\"token punctuation\\">(</span><span class=\\"token class-name\\">Properties</span> properties<span class=\\"token punctuation\\">)</span> <span class=\\"token punctuation\\">{</span>\\n        <span class=\\"token class-name\\">Interceptor</span><span class=\\"token punctuation\\">.</span><span class=\\"token keyword\\">super</span><span class=\\"token punctuation\\">.</span><span class=\\"token function\\">setProperties</span><span class=\\"token punctuation\\">(</span>properties<span class=\\"token punctuation\\">)</span><span class=\\"token punctuation\\">;</span>\\n    <span class=\\"token punctuation\\">}</span>\\n<span class=\\"token punctuation\\">}</span>\\n</code></pre><div class=\\"line-numbers\\" aria-hidden=\\"true\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","copyright":{"author":"xiaobai"},"autoDesc":true}');export{n as data};
