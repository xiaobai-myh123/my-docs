<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.60" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta name="keywords" content="RabbitMQ,AMQP,Broker,Exchange,优先级队列,延迟队列"><meta name="description" content="RabbitMQ 是一个在 AMQP（Advanced Message Queuing Protocol ）基础上实现的，可复用的企业消息系统。它可以用于大型软件系统各个模块之间的高效通信，支持高并发，支持可扩展。它支持多种客户端如：Python、Ruby、.NET、Java、JMS、C、PHP、ActionScript、XMPP、STOMP等，支持AJAX，持久化，用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不俗。"><meta property="og:url" content="https://javaguide.cn/high-performance/message-queue/rabbitmq-questions.html"><meta property="og:site_name" content="JavaGuide(Java面试+学习指南)"><meta property="og:title" content="RabbitMQ常见面试题总结"><meta property="og:description" content="本篇文章由 JavaGuide 收集自网络，原出处不明。 RabbitMQ 是什么？ RabbitMQ 是一个在 AMQP（Advanced Message Queuing Protocol ）基础上实现的，可复用的企业消息系统。它可以用于大型软件系统各个模块之间的高效通信，支持高并发，支持可扩展。它支持多种客户端如：Python、Ruby、.NET、Java、JMS、C、PHP、ActionScript、XMPP、STOMP等，支持AJAX，持久化，用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不俗。"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-02-23T10:39:58.000Z"><meta property="article:tag" content="消息队列"><meta property="article:modified_time" content="2023-02-23T10:39:58.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"RabbitMQ常见面试题总结","image":[""],"dateModified":"2023-02-23T10:39:58.000Z","author":[]}</script><meta name="robots" content="all"><meta name="author" content="Guide"><meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0"><meta name="apple-mobile-web-app-capable" content="yes"><script>var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?5dd2e8c97962d57b7b8fea1737c01743";
          var s = document.getElementsByTagName("script")[0]; 
          s.parentNode.insertBefore(hm, s);
        })();</script><link rel="stylesheet" href="/iconfont/iconfont.css"><title>RabbitMQ常见面试题总结 | JavaGuide(Java面试+学习指南)</title>
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-3f5e779d.css" as="style"><link rel="stylesheet" href="/assets/style-3f5e779d.css">
    <link rel="modulepreload" href="/assets/app-e4f2a821.js"><link rel="modulepreload" href="/assets/framework-b5ed7090.js"><link rel="modulepreload" href="/assets/rabbitmq-questions.html-6af17767.js"><link rel="modulepreload" href="/assets/rabbitmq-questions.html-9082ddfb.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">跳至主要內容</a><!--]--><!--[--><div class="theme-container has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><a href="/" class="brand"><img class="logo" src="/logo.png" alt="JavaGuide(Java面试+学习指南)"><!----><span class="site-name hide-in-pad">JavaGuide(Java面试+学习指南)</span></a><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/my-blog/" class="nav-link" aria-label="博客文章"><span class="font-icon icon iconfont icon-article" style=""></span>博客文章<!----></a></div></nav><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!----><div class="nav-item"><a class="repo-link" href="https://github.com/Snailclimb/JavaGuide" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!--[--><!----><!--]--><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-interview" style=""></span><span class="title">面试准备</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-java" style=""></span><span class="title">Java</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-computer" style=""></span><span class="title">计算机基础</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-database" style=""></span><span class="title">数据库</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-tool" style=""></span><span class="title">开发工具</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-framework" style=""></span><span class="title">常用框架</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-xitongsheji" style=""></span><span class="title">系统设计</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-distributed-network" style=""></span><span class="title">分布式</span><span class="arrow end"></span></button><!----></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-et-performance" style=""></span><span class="title">高性能</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/high-performance/read-and-write-separation-and-library-subtable.html" class="nav-link sidebar-link sidebar-page" aria-label="读写分离和分库分表详解"><span class="font-icon icon iconfont icon-mysql" style=""></span>读写分离和分库分表详解<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/load-balancing.html" class="nav-link sidebar-link sidebar-page" aria-label="负载均衡详解（付费）"><span class="font-icon icon iconfont icon-fuzaijunheng" style=""></span>负载均衡详解（付费）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/cdn.html" class="nav-link sidebar-link sidebar-page" aria-label="CDN（内容分发网络）详解"><span class="font-icon icon iconfont icon-cdn" style=""></span>CDN（内容分发网络）详解<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/sql-optimization.html" class="nav-link sidebar-link sidebar-page" aria-label="常见 SQL 优化手段总结（付费）"><span class="font-icon icon iconfont icon-mysql" style=""></span>常见 SQL 优化手段总结（付费）<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="font-icon icon iconfont icon-MQ" style=""></span><span class="title">消息队列</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a href="/high-performance/message-queue/message-queue.html" class="nav-link sidebar-link sidebar-page" aria-label="消息队列基础常见面试题总结"><!---->消息队列基础常见面试题总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/message-queue/kafka-questions-01.html" class="nav-link sidebar-link sidebar-page" aria-label="Kafka常见面试题总结"><!---->Kafka常见面试题总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/message-queue/rocketmq-intro.html" class="nav-link sidebar-link sidebar-page" aria-label="RocketMQ基础知识总结"><!---->RocketMQ基础知识总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/message-queue/rocketmq-questions.html" class="nav-link sidebar-link sidebar-page" aria-label="RocketMQ常见面试题总结"><!---->RocketMQ常见面试题总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/high-performance/message-queue/rabbitmq-intro.html" class="nav-link sidebar-link sidebar-page" aria-label="RabbitMQ基础知识总结"><!---->RabbitMQ基础知识总结<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="RabbitMQ常见面试题总结"><!---->RabbitMQ常见面试题总结<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-是什么" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RabbitMQ 是什么？"><!---->RabbitMQ 是什么？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RabbitMQ 特点?"><!---->RabbitMQ 特点?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#amqp-是什么" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="AMQP 是什么?"><!---->AMQP 是什么?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#说说生产者-producer-和消费者-consumer" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="说说生产者 Producer 和消费者 Consumer?"><!---->说说生产者 Producer 和消费者 Consumer?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#说说-broker-服务节点、queue-队列、exchange-交换器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="说说 Broker 服务节点、Queue 队列、Exchange 交换器？"><!---->说说 Broker 服务节点、Queue 队列、Exchange 交换器？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是死信队列-如何导致的" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="什么是死信队列？如何导致的？"><!---->什么是死信队列？如何导致的？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是延迟队列-rabbitmq-怎么实现延迟队列" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="什么是延迟队列？RabbitMQ 怎么实现延迟队列？"><!---->什么是延迟队列？RabbitMQ 怎么实现延迟队列？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是优先级队列" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="什么是优先级队列？"><!---->什么是优先级队列？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-有哪些工作模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RabbitMQ 有哪些工作模式？"><!---->RabbitMQ 有哪些工作模式？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-消息怎么传输" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RabbitMQ 消息怎么传输？"><!---->RabbitMQ 消息怎么传输？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证消息的可靠性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何保证消息的可靠性？"><!---->如何保证消息的可靠性？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证-rabbitmq-消息的顺序性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何保证 RabbitMQ 消息的顺序性？"><!---->如何保证 RabbitMQ 消息的顺序性？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证-rabbitmq-高可用的" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何保证 RabbitMQ 高可用的？"><!---->如何保证 RabbitMQ 高可用的？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何解决消息挤压问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何解决消息挤压问题？"><!---->如何解决消息挤压问题？<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何解决消息队列的延时以及过期失效问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="如何解决消息队列的延时以及过期失效问题？"><!---->如何解决消息队列的延时以及过期失效问题？<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li></ul></section></li></ul></section></li><li><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="font-icon icon iconfont icon-highavailable" style=""></span><span class="title">高可用</span><span class="arrow end"></span></button><!----></section></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->RabbitMQ常见面试题总结</h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="page-author-item" href="https://javaguide.cn/article/" target="_blank" rel="noopener noreferrer">Guide</a></span><span property="author" content="Guide"></span></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><span class="page-category-item category6 clickable" role="navigation">高性能</span><meta property="articleSection" content="高性能"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><span class="page-tag-item tag8 clickable" role="navigation">消息队列</span><meta property="keywords" content="消息队列"></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-02-23T10:39:58.000Z"></span><!----><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 3341 字</span><meta property="wordCount" content="3341"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 11 分钟</span><meta property="timeRequired" content="PT11M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容<button class="print-button" title="print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-是什么" class="router-link-active router-link-exact-active toc-link level2">RabbitMQ 是什么？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-特点" class="router-link-active router-link-exact-active toc-link level2">RabbitMQ 特点?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#amqp-是什么" class="router-link-active router-link-exact-active toc-link level2">AMQP 是什么?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#说说生产者-producer-和消费者-consumer" class="router-link-active router-link-exact-active toc-link level2">说说生产者 Producer 和消费者 Consumer?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#说说-broker-服务节点、queue-队列、exchange-交换器" class="router-link-active router-link-exact-active toc-link level2">说说 Broker 服务节点、Queue 队列、Exchange 交换器？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是死信队列-如何导致的" class="router-link-active router-link-exact-active toc-link level2">什么是死信队列？如何导致的？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是延迟队列-rabbitmq-怎么实现延迟队列" class="router-link-active router-link-exact-active toc-link level2">什么是延迟队列？RabbitMQ 怎么实现延迟队列？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#什么是优先级队列" class="router-link-active router-link-exact-active toc-link level2">什么是优先级队列？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-有哪些工作模式" class="router-link-active router-link-exact-active toc-link level2">RabbitMQ 有哪些工作模式？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#rabbitmq-消息怎么传输" class="router-link-active router-link-exact-active toc-link level2">RabbitMQ 消息怎么传输？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证消息的可靠性" class="router-link-active router-link-exact-active toc-link level2">如何保证消息的可靠性？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证-rabbitmq-消息的顺序性" class="router-link-active router-link-exact-active toc-link level2">如何保证 RabbitMQ 消息的顺序性？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何保证-rabbitmq-高可用的" class="router-link-active router-link-exact-active toc-link level2">如何保证 RabbitMQ 高可用的？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何解决消息挤压问题" class="router-link-active router-link-exact-active toc-link level2">如何解决消息挤压问题？</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/high-performance/message-queue/rabbitmq-questions.html#如何解决消息队列的延时以及过期失效问题" class="router-link-active router-link-exact-active toc-link level2">如何解决消息队列的延时以及过期失效问题？</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><blockquote><p>本篇文章由 JavaGuide 收集自网络，原出处不明。</p></blockquote><h2 id="rabbitmq-是什么" tabindex="-1"><a class="header-anchor" href="#rabbitmq-是什么" aria-hidden="true">#</a> RabbitMQ 是什么？</h2><p>RabbitMQ 是一个在 AMQP（Advanced Message Queuing Protocol ）基础上实现的，可复用的企业消息系统。它可以用于大型软件系统各个模块之间的高效通信，支持高并发，支持可扩展。它支持多种客户端如：Python、Ruby、.NET、Java、JMS、C、PHP、ActionScript、XMPP、STOMP等，支持AJAX，持久化，用于在分布式系统中存储转发消息，在易用性、扩展性、高可用性等方面表现不俗。</p><p>RabbitMQ是使用Erlang编写的一个开源的消息队列，本身支持很多的协议：AMQP，XMPP, SMTP, STOMP，也正是如此，使的它变的非常重量级，更适合于企业级的开发。它同时实现了一个Broker构架，这意味着消息在发送给客户端时先在中心队列排队，对路由(Routing)、负载均衡(Load balance)或者数据持久化都有很好的支持。</p><p>PS:也可能直接问什么是消息队列？消息队列就是一个使用队列来通信的组件。</p><h2 id="rabbitmq-特点" tabindex="-1"><a class="header-anchor" href="#rabbitmq-特点" aria-hidden="true">#</a> RabbitMQ 特点?</h2><ul><li><strong>可靠性</strong>: RabbitMQ 使用一些机制来保证可靠性， 如持久化、传输确认及发布确认等。</li><li><strong>灵活的路由</strong> : 在消息进入队列之前，通过交换器来路由消息。对于典型的路由功能， RabbitMQ 己经提供了一些内置的交换器来实现。针对更复杂的路由功能，可以将多个 交换器绑定在一起， 也可以通过插件机制来实现自己的交换器。</li><li><strong>扩展性</strong>: 多个 RabbitMQ 节点可以组成一个集群，也可以根据实际业务情况动态地扩展 集群中节点。</li><li><strong>高可用性</strong> : 队列可以在集群中的机器上设置镜像，使得在部分节点出现问题的情况下队 列仍然可用。</li><li><strong>多种协议</strong>: RabbitMQ 除了原生支持 AMQP 协议，还支持 STOMP， MQTT 等多种消息 中间件协议。</li><li><strong>多语言客户端</strong> :RabbitMQ 几乎支持所有常用语言，比如 Java、 Python、 Ruby、 PHP、 C#、 JavaScript 等。</li><li><strong>管理界面</strong> : RabbitMQ 提供了一个易用的用户界面，使得用户可以监控和管理消息、集 群中的节点等。</li><li><strong>插件机制</strong> : RabbitMQ 提供了许多插件 ， 以实现从多方面进行扩展，当然也可以编写自 己的插件。</li></ul><h2 id="amqp-是什么" tabindex="-1"><a class="header-anchor" href="#amqp-是什么" aria-hidden="true">#</a> AMQP 是什么?</h2><p>RabbitMQ 就是 AMQP 协议的 <code>Erlang</code> 的实现(当然 RabbitMQ 还支持 <code>STOMP2</code>、 <code>MQTT3</code> 等协议 ) AMQP 的模型架构 和 RabbitMQ 的模型架构是一样的，生产者将消息发送给交换器，交换器和队列绑定 。</p><p>RabbitMQ 中的交换器、交换器类型、队列、绑定、路由键等都是遵循的 AMQP 协议中相 应的概念。目前 RabbitMQ 最新版本默认支持的是 AMQP 0-9-1。</p><p><strong>AMQP 协议的三层</strong> ：</p><ul><li><strong>Module Layer</strong>:协议最高层，主要定义了一些客户端调用的命令，客户端可以用这些命令实现自己的业务逻辑。</li><li><strong>Session Layer</strong>:中间层，主要负责客户端命令发送给服务器，再将服务端应答返回客户端，提供可靠性同步机制和错误处理。</li><li><strong>TransportLayer</strong>:最底层，主要传输二进制数据流，提供帧的处理、信道服用、错误检测和数据表示等。</li></ul><p><strong>AMQP 模型的三大组件</strong> ：</p><ul><li><strong>交换器 (Exchange)</strong> ：消息代理服务器中用于把消息路由到队列的组件。</li><li><strong>队列 (Queue)</strong> ：用来存储消息的数据结构，位于硬盘或内存中。</li><li><strong>绑定 (Binding)</strong> ：一套规则，告知交换器消息应该将消息投递给哪个队列。</li></ul><h2 id="说说生产者-producer-和消费者-consumer" tabindex="-1"><a class="header-anchor" href="#说说生产者-producer-和消费者-consumer" aria-hidden="true">#</a> <strong>说说生产者 Producer 和消费者 Consumer?</strong></h2><p><strong>生产者</strong> :</p><ul><li>消息生产者，就是投递消息的一方。</li><li>消息一般包含两个部分：消息体（<code>payload</code>)和标签(<code>Label</code>)。</li></ul><p><strong>消费者</strong> ：</p><ul><li>消费消息，也就是接收消息的一方。</li><li>消费者连接到 RabbitMQ 服务器，并订阅到队列上。消费消息时只消费消息体，丢弃标签。</li></ul><h2 id="说说-broker-服务节点、queue-队列、exchange-交换器" tabindex="-1"><a class="header-anchor" href="#说说-broker-服务节点、queue-队列、exchange-交换器" aria-hidden="true">#</a> 说说 Broker 服务节点、Queue 队列、Exchange 交换器？</h2><ul><li><strong>Broker</strong> ： 可以看做 RabbitMQ 的服务节点。一般请下一个 Broker 可以看做一个 RabbitMQ 服务器。</li><li><strong>Queue</strong> :RabbitMQ 的内部对象，用于存储消息。多个消费者可以订阅同一队列，这时队列中的消息会被平摊（轮询）给多个消费者进行处理。</li><li><strong>Exchange</strong> : 生产者将消息发送到交换器，由交换器将消息路由到一个或者多个队列中。当路由不到时，或返回给生产者或直接丢弃。</li></ul><h2 id="什么是死信队列-如何导致的" tabindex="-1"><a class="header-anchor" href="#什么是死信队列-如何导致的" aria-hidden="true">#</a> 什么是死信队列？如何导致的？</h2><p>DLX，全称为 <code>Dead-Letter-Exchange</code>，死信交换器，死信邮箱。当消息在一个队列中变成死信 (<code>dead message</code>) 之后，它能被重新被发送到另一个交换器中，这个交换器就是 DLX，绑定 DLX 的队列就称之为死信队列。</p><p><strong>导致的死信的几种原因</strong>：</p><ul><li>消息被拒（<code>Basic.Reject /Basic.Nack</code>) 且 <code>requeue = false</code>。</li><li>消息 TTL 过期。</li><li>队列满了，无法再添加。</li></ul><h2 id="什么是延迟队列-rabbitmq-怎么实现延迟队列" tabindex="-1"><a class="header-anchor" href="#什么是延迟队列-rabbitmq-怎么实现延迟队列" aria-hidden="true">#</a> 什么是延迟队列？RabbitMQ 怎么实现延迟队列？</h2><p>延迟队列指的是存储对应的延迟消息，消息被发送以后，并不想让消费者立刻拿到消息，而是等待特定时间后，消费者才能拿到这个消息进行消费。</p><p>RabbitMQ本身是没有延迟队列的，要实现延迟消息，一般有两种方式：</p><ol><li>通过RabbitMQ本身队列的特性来实现，需要使用RabbitMQ的死信交换机（Exchange）和消息的存活时间TTL（Time To Live）。</li><li>在RabbitMQ 3.5.7及以上的版本提供了一个插件（rabbitmq-delayed-message-exchange）来实现延迟队列功能。同时，插件依赖Erlang/OPT 18.0及以上。</li></ol><p>也就是说，AMQP 协议以及RabbitMQ本身没有直接支持延迟队列的功能，但是可以通过TTL和DLX模拟出延迟队列的功能。</p><h2 id="什么是优先级队列" tabindex="-1"><a class="header-anchor" href="#什么是优先级队列" aria-hidden="true">#</a> 什么是优先级队列？</h2><p>RabbitMQ 自 V3.5.0 有优先级队列实现，优先级高的队列会先被消费。</p><p>可以通过<code>x-max-priority</code>参数来实现优先级队列。不过，当消费速度大于生产速度且 Broker 没有堆积的情况下，优先级显得没有意义。</p><h2 id="rabbitmq-有哪些工作模式" tabindex="-1"><a class="header-anchor" href="#rabbitmq-有哪些工作模式" aria-hidden="true">#</a> RabbitMQ 有哪些工作模式？</h2><ul><li>简单模式</li><li>work 工作模式</li><li>pub/sub 发布订阅模式</li><li>Routing 路由模式</li><li>Topic 主题模式</li></ul><h2 id="rabbitmq-消息怎么传输" tabindex="-1"><a class="header-anchor" href="#rabbitmq-消息怎么传输" aria-hidden="true">#</a> RabbitMQ 消息怎么传输？</h2><p>由于 TCP 链接的创建和销毁开销较大，且并发数受系统资源限制，会造成性能瓶颈，所以 RabbitMQ 使用信道的方式来传输数据。信道（Channel）是生产者、消费者与 RabbitMQ 通信的渠道，信道是建立在 TCP 链接上的虚拟链接，且每条 TCP 链接上的信道数量没有限制。就是说 RabbitMQ 在一条 TCP 链接上建立成百上千个信道来达到多个线程处理，这个 TCP 被多个线程共享，每个信道在 RabbitMQ 都有唯一的 ID，保证了信道私有性，每个信道对应一个线程使用。</p><h2 id="如何保证消息的可靠性" tabindex="-1"><a class="header-anchor" href="#如何保证消息的可靠性" aria-hidden="true">#</a> <strong>如何保证消息的可靠性？</strong></h2><p>消息到 MQ 的过程中搞丢，MQ 自己搞丢，MQ 到消费过程中搞丢。</p><ul><li>生产者到 RabbitMQ：事务机制和 Confirm 机制，注意：事务机制和 Confirm 机制是互斥的，两者不能共存，会导致 RabbitMQ 报错。</li><li>RabbitMQ 自身：持久化、集群、普通模式、镜像模式。</li><li>RabbitMQ 到消费者：basicAck 机制、死信队列、消息补偿机制。</li></ul><h2 id="如何保证-rabbitmq-消息的顺序性" tabindex="-1"><a class="header-anchor" href="#如何保证-rabbitmq-消息的顺序性" aria-hidden="true">#</a> 如何保证 RabbitMQ 消息的顺序性？</h2><ul><li>拆分多个 queue(消息队列)，每个 queue(消息队列) 一个 consumer(消费者)，就是多一些 queue (消息队列)而已，确实是麻烦点；</li><li>或者就一个 queue (消息队列)但是对应一个 consumer(消费者)，然后这个 consumer(消费者)内部用内存队列做排队，然后分发给底层不同的 worker 来处理。</li></ul><h2 id="如何保证-rabbitmq-高可用的" tabindex="-1"><a class="header-anchor" href="#如何保证-rabbitmq-高可用的" aria-hidden="true">#</a> 如何保证 RabbitMQ 高可用的？</h2><p>RabbitMQ 是比较有代表性的，因为是基于主从（非分布式）做高可用性的，我们就以 RabbitMQ 为例子讲解第一种 MQ 的高可用性怎么实现。RabbitMQ 有三种模式：单机模式、普通集群模式、镜像集群模式。</p><p><strong>单机模式</strong></p><p>Demo 级别的，一般就是你本地启动了玩玩儿的?，没人生产用单机模式。</p><p><strong>普通集群模式</strong></p><p>意思就是在多台机器上启动多个 RabbitMQ 实例，每个机器启动一个。你创建的 queue，只会放在一个 RabbitMQ 实例上，但是每个实例都同步 queue 的元数据（元数据可以认为是 queue 的一些配置信息，通过元数据，可以找到 queue 所在实例）。</p><p>你消费的时候，实际上如果连接到了另外一个实例，那么那个实例会从 queue 所在实例上拉取数据过来。这方案主要是提高吞吐量的，就是说让集群中多个节点来服务某个 queue 的读写操作。</p><p><strong>镜像集群模式</strong></p><p>这种模式，才是所谓的 RabbitMQ 的高可用模式。跟普通集群模式不一样的是，在镜像集群模式下，你创建的 queue，无论元数据还是 queue 里的消息都会存在于多个实例上，就是说，每个 RabbitMQ 节点都有这个 queue 的一个完整镜像，包含 queue 的全部数据的意思。然后每次你写消息到 queue 的时候，都会自动把消息同步到多个实例的 queue 上。RabbitMQ 有很好的管理控制台，就是在后台新增一个策略，这个策略是镜像集群模式的策略，指定的时候是可以要求数据同步到所有节点的，也可以要求同步到指定数量的节点，再次创建 queue 的时候，应用这个策略，就会自动将数据同步到其他的节点上去了。</p><p>这样的好处在于，你任何一个机器宕机了，没事儿，其它机器（节点）还包含了这个 queue 的完整数据，别的 consumer 都可以到其它节点上去消费数据。坏处在于，第一，这个性能开销也太大了吧，消息需要同步到所有机器上，导致网络带宽压力和消耗很重！RabbitMQ 一个 queue 的数据都是放在一个节点里的，镜像集群下，也是每个节点都放这个 queue 的完整数据。</p><h2 id="如何解决消息挤压问题" tabindex="-1"><a class="header-anchor" href="#如何解决消息挤压问题" aria-hidden="true">#</a> 如何解决消息挤压问题？</h2><p><strong>临时紧急扩容</strong>。先修复 consumer 的问题，确保其恢复消费速度，然后将现有 cnosumer 都停掉。新建一个 topic，partition 是原来的 10 倍，临时建立好原先 10 倍的 queue 数量。然后写一个临时的分发数据的 consumer 程序，这个程序部署上去消费积压的数据，消费之后不做耗时的处理，直接均匀轮询写入临时建立好的 10 倍数量的 queue。接着临时征用 10 倍的机器来部署 consumer，每一批 consumer 消费一个临时 queue 的数据。这种做法相当于是临时将 queue 资源和 consumer 资源扩大 10 倍，以正常的 10 倍速度来消费数据。等快速消费完积压数据之后，得恢复原先部署的架构，重新用原先的 consumer 机器来消费消息。</p><h2 id="如何解决消息队列的延时以及过期失效问题" tabindex="-1"><a class="header-anchor" href="#如何解决消息队列的延时以及过期失效问题" aria-hidden="true">#</a> 如何解决消息队列的延时以及过期失效问题？</h2><p>RabbtiMQ 是可以设置过期时间的，也就是 TTL。如果消息在 queue 中积压超过一定的时间就会被 RabbitMQ 给清理掉，这个数据就没了。那这就是第二个坑了。这就不是说数据会大量积压在 mq 里，而是大量的数据会直接搞丢。我们可以采取一个方案，就是批量重导，这个我们之前线上也有类似的场景干过。就是大量积压的时候，我们当时就直接丢弃数据了，然后等过了高峰期以后，比如大家一起喝咖啡熬夜到晚上 12 点以后，用户都睡觉了。这个时候我们就开始写程序，将丢失的那批数据，写个临时程序，一点一点的查出来，然后重新灌入 mq 里面去，把白天丢的数据给他补回来。也只能是这样了。假设 1 万个订单积压在 mq 里面，没有处理，其中 1000 个订单都丢了，你只能手动写程序把那 1000 个订单给查出来，手动发到 mq 里去再补一次。</p></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/Snailclimb/JavaGuide/edit/main/docs/high-performance/message-queue/rabbitmq-questions.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: xiaobaix25@gamil.com">xiaobai-myh123</span><!--]--><!--]--></div></div></footer><nav class="page-nav"><a href="/high-performance/message-queue/rabbitmq-intro.html" class="nav-link prev" aria-label="RabbitMQ基础知识总结"><div class="hint"><span class="arrow start"></span>上一页</div><div class="link"><!---->RabbitMQ基础知识总结</div></a><!----></nav><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn/" target="_blank">鄂ICP备2020015769号-1</a></div><div class="copyright">Copyright © 2023 Guide</div></footer></div><!--]--><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-e4f2a821.js" defer></script>
  </body>
</html>
